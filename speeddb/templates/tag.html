{% extends "base.html" %}
{% block title %}{{ search_query }}{% endblock %}
{% block content %}
{% for clip in clips %}
    <div class="card">
        <div class="card-header" id="heading{{ loop.index }}">
            <div class="row">
                <div class="col">
                    <a href="#" data-toggle="collapse" data-target="#collapse{{ loop.index }}" aria-expanded="false" aria-controls="collapse{{ loop.index }}">
                        {{ clip.title }}
                    </a>
                </div>
                <div class="col-auto">
                    <a href="#">{{ clip.user.username }}</a>
                </div>
            </div>
        </div>
        <div id="collapse{{ loop.index }}" class="collapse" aria-labelledby="heading{{ loop.index }}">
            <div class="card-body">
                <div class="search-embed">
                    {{ clip.embed }}
                </div>
                <div class="search-author">
                    Submitted by <a href="#">{{ clip.user.username }}</a> on {{ clip.time_created }}
                </div>
                <div class="search-description">
                    {{ clip.description }}
                </div>
                <div class="search-tags">
                    {% for tag in clip.tags %}
                        <a href="{{ url_for('show_tag_page', tag_name=tag.name, page=1) }}" class="badge badge-primary">{{ tag.name }}</a>
                    {% endfor %}
                </div>
                <div class="search-link-to-clip">
                    <a href="{{ url_for('show_clip', clip_id=clip.id) }}">Link to clip</a>
                    -
                    <a href="#">Report</a>
                </div>
            </div>
        </div>
    </div>
{% endfor %}
<nav aria-label="Search result pages">
    <ul class="pagination justify-content-center">
        {% if page == 1 %}
            <li class="page-item disabled"><a class="page-link" href="{{ url_for('show_tag_page', tag_name=tag_name, page=page - 1) }}" tabindex="-1">Previous</a></li>
        {% else %}
            <li class="page-item"><a class="page-link" href="{{ url_for('show_tag_page', tag_name=tag_name, page=page - 1) }}">Previous</a></li>
        {% endif %}

        <li class="page-item {% if page == 1 %}active{% endif %}"><a class="page-link" href="{{ url_for('show_tag_page', tag_name=tag_name, page=1) }}">1</a></li>

        {% if page - 2 > 1 %}
            <li class="page-item disabled"><a class="page-link" href="#" tabindex="-1">...</a></li>
        {% endif %}

        {% for i in range(page - 2, page + 3) %}
            {% if i > 1 and i < page_count %}
                <li class="page-item {% if page == i %}active{% endif %}"><a class="page-link" href="{{ url_for('show_tag_page', tag_name=tag_name, page=i) }}">{{ i }}</a></li>
            {% endif %}
        {% endfor %}

        {% if page + 3 < page_count %}
            <li class="page-item disabled"><a class="page-link" href="#" tabindex="-1">...</a></li>
        {% endif %}

        {% if page_count > 1 %}
            <li class="page-item {% if page == page_count %}active{% endif %}"><a class="page-link" href="{{ url_for('show_tag_page', tag_name=tag_name, page=page_count) }}">{{ page_count }}</a></li>
        {% endif %}

        {% if page == page_count %}
            <li class="page-item disabled"><a class="page-link" href="{{ url_for('show_tag_page', tag_name=tag_name, page=page + 1) }}" tabindex="-1">Next</a></li>
        {% else %}
            <li class="page-item"><a class="page-link" href="{{ url_for('show_tag_page', tag_name=tag_name, page=page + 1) }}">Next</a></li>
        {% endif %}
    </ul>
</nav>
{% endblock %}